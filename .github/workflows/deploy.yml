name: build-test-deploy
run-name: Build/Test/Deploy
on: [push]
jobs:
    deploy_job:
        runs-on: ubuntu-latest
        name: Build & Deploy
        steps:
            -   uses: actions/checkout@v4
            -   uses: actions/setup-node@v3
                with:
                    node-version: '14'
            -   run: npm ci
            -   run: npm run build
            -   run: npm test
            -   uses: wlixcc/SFTP-Deploy-Action@v1.2.4
                with:
                    username: ${{ secrets.SFTP_USERNAME }}
                    server: ${{ secrets.SFTP_SERVER }}
                    port: ${{ secrets.SFTP_PORT }}
                    local_path: './*'
                    remote_path: 'C:/PersonalSite'
                    sftp_only: true
                    password: ${{ secrets.SFTP_PASSWORD }}
